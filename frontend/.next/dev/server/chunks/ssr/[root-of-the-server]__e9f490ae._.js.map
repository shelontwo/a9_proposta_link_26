{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/mauricio/.gemini/antigravity/scratch/ploomes-tracker/frontend/src/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\nimport { useRouter } from 'next/navigation';\nimport { useEffect, useState } from 'react';\n\nconst BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:3001';\n\ninterface User {\n  id: string;\n  email: string;\n  name: string;\n  picture: string | undefined;\n  provider: string;\n}\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport default function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const router = useRouter();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [user, setUser] = useState<User | null>(null);\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const res = await fetch(`${BACKEND_URL}/auth/user`, {\n          credentials: 'include'\n        });\n        const data = await res.json();\n\n        if (data.authenticated && data.user) {\n          setIsAuthenticated(true);\n          setUser(data.user);\n          setIsLoading(false);\n        } else {\n          router.push('/login');\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        router.push('/login');\n      }\n    };\n\n    checkAuth();\n  }, [router]);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-brand-black\">\n        <div className=\"text-center\">\n          <div className=\"inline-block h-12 w-12 animate-spin rounded-full border-4 border-solid border-brand-neon border-r-transparent\"></div>\n          <p className=\"mt-4 text-brand-gray\">Verificando autenticação...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n\nexport function useAuth() {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const res = await fetch(`${BACKEND_URL}/auth/user`, {\n          credentials: 'include'\n        });\n        const data = await res.json();\n\n        if (data.authenticated && data.user) {\n          setUser(data.user);\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    checkAuth();\n  }, []);\n\n  return { user, isLoading };\n}\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAFA;;;;AAIA,MAAM,cAAc,6DAAuC;AAc5C,SAAS,eAAe,EAAE,QAAQ,EAAuB;IACtE,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAE9C,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,GAAG,YAAY,UAAU,CAAC,EAAE;oBAClD,aAAa;gBACf;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAE3B,IAAI,KAAK,aAAa,IAAI,KAAK,IAAI,EAAE;oBACnC,mBAAmB;oBACnB,QAAQ,KAAK,IAAI;oBACjB,aAAa;gBACf,OAAO;oBACL,OAAO,IAAI,CAAC;gBACd;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,sBAAsB;gBACpC,OAAO,IAAI,CAAC;YACd;QACF;QAEA;IACF,GAAG;QAAC;KAAO;IAEX,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAuB;;;;;;;;;;;;;;;;;IAI5C;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ;AAEO,SAAS;IACd,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,GAAG,YAAY,UAAU,CAAC,EAAE;oBAClD,aAAa;gBACf;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAE3B,IAAI,KAAK,aAAa,IAAI,KAAK,IAAI,EAAE;oBACnC,QAAQ,KAAK,IAAI;gBACnB;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,sBAAsB;YACtC,SAAU;gBACR,aAAa;YACf;QACF;QAEA;IACF,GAAG,EAAE;IAEL,OAAO;QAAE;QAAM;IAAU;AAC3B"}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///home/mauricio/.gemini/antigravity/scratch/ploomes-tracker/frontend/src/app/admin/layout.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from 'react';\nimport { useRouter, usePathname } from 'next/navigation';\nimport Link from 'next/link';\nimport { LogOut, LayoutDashboard, Users, Presentation, ShieldCheck, User } from 'lucide-react';\nimport ProtectedRoute from '@/components/ProtectedRoute';\n\nconst BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:3001';\n\ninterface UserData {\n  id: string;\n  email: string;\n  name: string;\n  picture?: string;\n  provider: string;\n}\n\nexport default function AdminLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const router = useRouter();\n  const pathname = usePathname();\n  const [user, setUser] = useState<UserData | null>(null);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const res = await fetch(`${BACKEND_URL}/auth/user`, {\n          credentials: 'include'\n        });\n        const data = await res.json();\n        if (data.authenticated && data.user) {\n          setUser(data.user);\n        }\n      } catch (error) {\n        console.error('Failed to fetch user:', error);\n      }\n    };\n\n    fetchUser();\n  }, []);\n\n  const handleLogout = async () => {\n    try {\n      await fetch(`${BACKEND_URL}/auth/logout`, {\n        method: 'POST',\n        credentials: 'include'\n      });\n      router.push('/login');\n    } catch (error) {\n      console.error('Logout failed:', error);\n      router.push('/login');\n    }\n  };\n\n  const navItems = [\n    { label: 'Dashboard', href: '/admin', icon: LayoutDashboard },\n    { label: 'Clientes', href: '/admin/clients', icon: Users },\n    { label: 'Apresentações', href: '/admin/presentations', icon: Presentation },\n  ];\n\n  return (\n    <ProtectedRoute>\n      <div className=\"min-h-screen bg-brand-black text-white flex\">\n        {/* Sidebar */}\n        <aside className=\"w-72 border-r border-white/5 bg-brand-darkgray/50 backdrop-blur-xl p-6 flex flex-col gap-8\">\n          <div className=\"flex items-center gap-3 pl-2\">\n            <div className=\"w-10 h-10 bg-brand-neon rounded-xl flex items-center justify-center shadow-glow\">\n              <ShieldCheck className=\"text-black\" size={24} />\n            </div>\n            <h1 className=\"text-xl font-bold text-white tracking-tighter\">\n              A9<span className=\"text-brand-neon\">Admin</span>\n            </h1>\n          </div>\n\n          <nav className=\"flex flex-col gap-1\">\n            {navItems.map((item) => {\n              const Icon = item.icon;\n              const isActive = pathname === item.href;\n              return (\n                <Link\n                  key={item.href}\n                  href={item.href}\n                  className={`flex items-center gap-3 p-3 rounded-xl transition-all duration-200 group ${isActive\n                    ? 'bg-brand-neon text-black font-bold shadow-glow'\n                    : 'text-brand-gray hover:bg-white/5 hover:text-white'\n                    }`}\n                >\n                  <Icon size={20} className={isActive ? 'text-black' : 'group-hover:text-brand-neon transition-colors'} />\n                  {item.label}\n                </Link>\n              );\n            })}\n          </nav>\n\n          <div className=\"mt-auto space-y-4\">\n            {/* User Profile */}\n            {user && (\n              <div className=\"p-4 rounded-2xl bg-black/40 border border-white/5\">\n                <p className=\"text-[10px] uppercase tracking-widest text-brand-gray font-bold mb-3\">Usuário Logado</p>\n                <div className=\"flex items-center gap-3\">\n                  {user.picture ? (\n                    <img\n                      src={user.picture}\n                      alt={user.name}\n                      className=\"w-10 h-10 rounded-full border-2 border-brand-neon/30\"\n                    />\n                  ) : (\n                    <div className=\"w-10 h-10 rounded-full bg-brand-neon/20 border-2 border-brand-neon/30 flex items-center justify-center\">\n                      <User size={20} className=\"text-brand-neon\" />\n                    </div>\n                  )}\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-sm font-bold text-white truncate\">{user.name}</p>\n                    <p className=\"text-xs text-brand-gray truncate\">{user.email}</p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"p-4 rounded-2xl bg-black/40 border border-white/5\">\n              <p className=\"text-[10px] uppercase tracking-widest text-brand-gray font-bold mb-2\">Status do Sistema</p>\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-2 h-2 rounded-full bg-brand-neon animate-pulse shadow-[0_0_8px_#1AFF00]\"></div>\n                <span className=\"text-sm font-medium text-white\">Servidor Ativo</span>\n              </div>\n            </div>\n\n            <button\n              onClick={handleLogout}\n              className=\"w-full flex items-center gap-3 p-3 rounded-xl text-red-400 hover:bg-red-400/10 transition-all font-medium group\"\n            >\n              <LogOut size={20} className=\"group-hover:translate-x-1 transition-transform\" />\n              Sair do Painel\n            </button>\n          </div>\n        </aside>\n\n        {/* Main Content */}\n        <main className=\"flex-1 overflow-auto bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-brand-neon/5 via-transparent to-transparent\">\n          <div className=\"p-8 max-w-7xl mx-auto\">\n            <style jsx global>{`\n              #next-dev-overlay, \n              #nextjs-portal, \n              .nextjs-toast-errors-parent, \n              #__next-build-watcher,\n              [data-nextjs-toast-errors-parent] {\n                display: none !important;\n              }\n            `}</style>\n            {children}\n          </div>\n        </main>\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}